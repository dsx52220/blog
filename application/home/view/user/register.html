<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册</title>
    <link rel="stylesheet" href="__STATIC__/layui/css/layui.css">
    <link rel="stylesheet" href="__CSS__/l-blog.css">
</head>
<body style="background-color: #FFFFFF;">
<div id="register_panel">
    <div class="layui-row">
        <div class="layui-row">
            <input class="layui-input" name="email" id="email" placeholder="邮箱">
        </div>
        <div class="layui-row">
            <div class="layui-col-xs7">
                <input class="layui-input" name="captcha" id="captcha" placeholder="请输入验证码">
            </div>
            <div class="layui-col-xs5">
                <img class="right" src="{:captcha_src()}" style="height: 38px;width: 108px;"
                     onclick="this.src='{:captcha_src()}?'+Math.random()">
            </div>
        </div>
        <div class="layui-row">
            <div class="layui-col-xs7">
                <input class="layui-input" name="email_captcha" placeholder="请输入邮箱验证码">
            </div>
            <div class="layui-col-xs5">
                <button class="layui-btn layui-btn-primary right" type="button" onclick="getEmailCaptcha()">获取验证码
                </button>
            </div>
        </div>
        <div class="layui-row">
            <button class="layui-btn sign-btn">注册</button>
        </div>
        <div class="layui-row">
            <a href="" class="right">忘记密码？</a><span class="right">&nbsp;&nbsp;</span>
            <a href="javascript:loginShow();" class="right">已有账号</a>
        </div>
    </div>
    <div class="layui-row">
        <div class="layui-col-xs4">
            <hr class="layui-bg-gray">
        </div>
        <div class="layui-col-xs4 text-center">
            其他登录方式
        </div>
        <div class="layui-col-xs4">
            <hr class="layui-bg-gray">
        </div>
    </div>
    <div class="layui-row">
        <div class="layui-col-xs6 text-center"><a href="javascript:;"><img src="__IMG__/github-black.svg"></a>
        </div>
        <div class="layui-col-xs6 text-center"><a href><i class="layui-icon layui-icon-login-qq"></i></a>
        </div>
    </div>
</div>

</body>
</html>
<script src="__JS__/jquery.min.js"></script>
<script src="__STATIC__/layui/layui.all.js"></script>
<script src="__JS__/common.js"></script>
<script src="__JS__/l-blog.js"></script>
<script src="__JS__/check.js"></script>
<script>
    function getEmailCaptcha() {
        let email = $('#email').val();
        let res = checkEmail(email);
        if (true !== res) {
            parent.layer.msg(res);
            return false;
        }
        let captcha = $('#captcha').val();
        if (captcha.length != 4) {
            parent.layer.msg('验证码长度为4');
            return false;
        }
        let formData = new FormData();
        formData.append('email', email);
        formData.append('captcha', captcha);
        res = ajax(formData, '{:url("user/getRegEmailCode",["_ajax"=>1])}', 'post');
        if (res) {
            let data = JSON.parse(res);
            if (data.code == 1) {

            }
            parent.layer.msg(data.msg);
        }
    }

    //按钮倒计时
    function timer() {

    }
</script>